<!doctype html><html lang=ja dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head>
<meta charset=utf-8>
<meta http-equiv=content-language content="ja">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>GKE Guestbook チュートリアルを試す &#183; 1Q77</title>
<meta name=title content="GKE Guestbook チュートリアルを試す &#183; 1Q77">
<link rel=canonical href=https://preview-blog.1q77.com/2015/07/gke-guestbook-tutorial/>
<link type=text/css rel=stylesheet href=/css/main.bundle.min.a9d40529d239a91ecb75447e67ee6c80c1f1c28593904b4052651b12220121e13ec42904268b0193a6858f039cf8bfdd2b1331529ed341ddc7488cec3bdcbc2e.css integrity="sha512-qdQFKdI5qR7LdUR+Z+5sgMHxwoWTkEtAUmUbEiIBIeE+xCkEJosBk6aFjwOc+L/dKxMxUp7TQd3HSIzsO9y8Lg==">
<script type=text/javascript src=/js/main.min.cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e.js integrity="sha512-z4PhNX7vuL3xVChQ1m2AB9Yg5AULVxXcg/SpIdNs6c5H0NE8XYXysP+DGNKHfuwvY7kxvUdBeoGlODJ6+SfaPg=="></script>
<script type=text/javascript src=/js/appearance.min.49025a779c36ad37a5bf9f1cc6bffd35ccb69ce15560ef1b10057ddf31576265b19f8bcc1733207336c9144926f7b18aea2e5895f29e858b24271332a2fa5cd5.js integrity="sha512-SQJad5w2rTelv58cxr/9Ncy2nOFVYO8bEAV93zFXYmWxn4vMFzMgczbJFEkm97GK6i5YlfKehYskJxMyovpc1Q=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.34ee8372ff77835535e486c6ed01ff6993374a1cec8108898cad793fc6ae7520778e24db68e085c762d25af6fa7d00b57d7a791438dc68b676581f8c8344f6e0.js integrity="sha512-NO6Dcv93g1U15IbG7QH/aZM3ShzsgQiJjK15P8audSB3jiTbaOCFx2LSWvb6fQC1fXp5FDjcaLZ2WB+Mg0T24A==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<meta property="og:title" content="GKE Guestbook チュートリアルを試す">
<meta property="og:description" content="前回は Wordpress のチュートリアルを試しました、次はもう少し複雑な Guestbook Tutorial - Container Engine — Google Cloud Platform をなぞります。 Create a Container Engine cluster # GKE クラスタを作成します $ gcloud beta container clusters create guestbook Creating cluster">
<meta property="og:type" content="article">
<meta property="og:url" content="https://preview-blog.1q77.com/2015/07/gke-guestbook-tutorial/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2015-07-12T16:14:01+00:00">
<meta property="article:modified_time" content="2015-07-12T16:14:01+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="GKE Guestbook チュートリアルを試す">
<meta name=twitter:description content="前回は Wordpress のチュートリアルを試しました、次はもう少し複雑な Guestbook Tutorial - Container Engine — Google Cloud Platform をなぞります。 Create a Container Engine cluster # GKE クラスタを作成します $ gcloud beta container clusters create guestbook Creating cluster">
<script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"GKE Guestbook チュートリアルを試す","headline":"GKE Guestbook チュートリアルを試す","abstract":"前回は Wordpress のチュートリアルを試しました、次はもう少し複雑な Guestbook Tutorial - Container Engine — Google Cloud Platform をなぞります。 Create a Container Engine cluster # GKE クラスタを作成します $ gcloud beta container clusters create guestbook Creating cluster","inLanguage":"ja","url":"https:\/\/preview-blog.1q77.com\/2015\/07\/gke-guestbook-tutorial\/","author":{"@type":"Person","name":"Yoshinori Teraoka"},"copyrightYear":"2015","dateCreated":"2015-07-12T16:14:01\u002b00:00","datePublished":"2015-07-12T16:14:01\u002b00:00","dateModified":"2015-07-12T16:14:01\u002b00:00","keywords":["GCP","GKE","Google Compute Engine","Kubernetes","tutorial"],"mainEntityOfPage":"true","wordCount":"2936"}]</script>
<meta name=author content="Yoshinori Teraoka">
<link href=https://twitter.com/yteraoka rel=me>
<link href=https://github.com/yteraoka rel=me>
<link href=https://linkedin.com/in/fa5b66b7-9c77-4e1b-8b97-40ba4a5a2c13/ rel=me>
<link href=https://medium.com/@yteraoka rel=me>
<link rel=stylesheet href=https://rsms.me/inter/inter.css>
</head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32">
<div id=the-top class="absolute flex self-center">
<a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>メインコンテンツへスキップ</a>
</div>
<div style=padding-left:0;padding-right:0 class="flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
<div class="flex flex-1 items-center justify-between">
<nav class="flex space-x-3">
<a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">1Q77</a>
</nav>
<div class="hidden md:flex items-center space-x-5 md:ml-12">
<a href=/posts/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=Posts>
Blog
</a>
<a href=/tags/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=Tags>
Tags
</a>
<a href=https://github.com/yteraoka class="text-base font-medium text-gray-500 hover:text-gray-900" title>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
&nbsp;
GitHub
</a>
<a href=https://twitter.com/yteraoka class="text-base font-medium text-gray-500 hover:text-gray-900" title>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
&nbsp;
Twitter
</a>
<a href=https://qiita.com/yteraoka class="text-base font-medium text-gray-500 hover:text-gray-900" title>
Qiita
</a>
<button id=search-button class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</button>
<div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400">
<button id=appearance-switcher type=button>
<div class="flex items-center justify-center h-12 dark:hidden">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg>
</span>
</div>
<div class="items-center justify-center hidden h-12 dark:flex">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg>
</span>
</div>
</button>
</div>
</div>
<div class="flex md:hidden items-center space-x-5 md:ml-12">
<span></span>
<button id=search-button-mobile class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</button>
<button id=appearance-switcher-mobile type=button style=margin-right:5px>
<div class="flex items-center justify-center h-12 dark:hidden">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg>
</span>
</div>
<div class="items-center justify-center hidden h-12 dark:flex">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg>
</span>
</div>
</button>
</div>
</div>
<div class="-my-2 -mr-2 md:hidden">
<label id=menu-button for=menu-controller class=block>
<input type=checkbox id=menu-controller class=hidden>
<div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg>
</span>
</div>
<div id=menu-wrapper style=padding-top:25px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
<ul class="flex movedown flex-col w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl sm:px-14 md:px-24 lg:px-32 sm:py-10 sm:pt-10">
<li class=mb-1>
<span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
</span>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>
Blog
</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>
Tags
</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://github.com/yteraoka title>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
&nbsp;
GitHub
</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://twitter.com/yteraoka title>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
&nbsp;
Twitter
</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://qiita.com/yteraoka title>
Qiita
</a>
</li>
</ul>
</div>
</label>
</div>
</div>
<div id=mobile-menu class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
<ul class="flex movedown flex-col w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl sm:px-14 md:px-24 lg:px-32 sm:py-10 sm:pt-10">
<li class=mb-1>
<span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
</span>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>Blog</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Tags</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://github.com/yteraoka title>GitHub</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://twitter.com/yteraoka title>Twitter</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://qiita.com/yteraoka title>Qiita</a>
</li>
<li>
<button id=search-button-mobile class="text-base hover:text-primary-600 dark:hover:text-primary-400">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</button>
</li>
</ul>
</div>
<div class="relative flex flex-col grow">
<main id=main-content class=grow>
<article>
<header class=max-w-prose>
<ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
<li class="inline hidden">
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>1Q77</a><span class="px-1 text-primary-500">/</span>
</li>
<li class=inline>
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span>
</li>
<li class="inline hidden">
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/2015/07/gke-guestbook-tutorial/>GKE Guestbook チュートリアルを試す</a><span class="px-1 text-primary-500">/</span>
</li>
</ol>
<h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
GKE Guestbook チュートリアルを試す
</h1>
<div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
<div class="flex flex-row flex-wrap items-center">
<time datetime="2015-07-12 16:14:01 +0000 UTC">2015年7月12日</time>
</div>
<div class="flex flex-row flex-wrap items-center">
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/gcp/")'>
<span class=flex>
<span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
GCP
</span>
</span>
</span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/gke/")'>
<span class=flex>
<span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
GKE
</span>
</span>
</span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/google-compute-engine/")'>
<span class=flex>
<span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
Google Compute Engine
</span>
</span>
</span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/kubernetes/")'>
<span class=flex>
<span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
Kubernetes
</span>
</span>
</span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/tutorial/")'>
<span class=flex>
<span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
tutorial
</span>
</span>
</span>
</div>
</div>
</header>
<section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
<div class="order-first px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8">
<div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10">
<details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
<summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
目次
</summary>
<div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
<nav id=TableOfContents>
<ul>
<li><a href=#create-a-container-engine-cluster>Create a Container Engine cluster</a></li>
<li><a href=#step-one-start-the-redis-master>Step one: Start the Redis master</a></li>
<li><a href=#step-two-start-the-redis-masters-service>Step two: Start the Redis master&rsquo;s service</a></li>
<li><a href=#step-three-start-the-replicated-redis-worker-pods>Step three: Start the replicated Redis worker pods</a></li>
<li><a href=#step-four-create-the-redis-worker-service>Step four: Create the Redis worker service</a></li>
<li><a href=#step-five-create-the-guestbook-web-server-pods>Step five: Create the guestbook web server pods</a></li>
<li><a href=#step-six-create-a-guestbook-web-service-with-an-external-ip-and-open-up-the-firewall>Step six: Create a guestbook web service with an external IP, and open up the firewall</a></li>
<li><a href=#resizing-a-replication-controller-changing-the-number-of-web-servers>Resizing a replication controller: Changing the number of web servers</a></li>
<li><a href=#cleanup>Cleanup</a></li>
</ul>
</nav>
</div>
</details>
<details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
<summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
目次
</summary>
<div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
<nav id=TableOfContents>
<ul>
<li><a href=#create-a-container-engine-cluster>Create a Container Engine cluster</a></li>
<li><a href=#step-one-start-the-redis-master>Step one: Start the Redis master</a></li>
<li><a href=#step-two-start-the-redis-masters-service>Step two: Start the Redis master&rsquo;s service</a></li>
<li><a href=#step-three-start-the-replicated-redis-worker-pods>Step three: Start the replicated Redis worker pods</a></li>
<li><a href=#step-four-create-the-redis-worker-service>Step four: Create the Redis worker service</a></li>
<li><a href=#step-five-create-the-guestbook-web-server-pods>Step five: Create the guestbook web server pods</a></li>
<li><a href=#step-six-create-a-guestbook-web-service-with-an-external-ip-and-open-up-the-firewall>Step six: Create a guestbook web service with an external IP, and open up the firewall</a></li>
<li><a href=#resizing-a-replication-controller-changing-the-number-of-web-servers>Resizing a replication controller: Changing the number of web servers</a></li>
<li><a href=#cleanup>Cleanup</a></li>
</ul>
</nav>
</div>
</details>
</div>
</div>
<div class="min-w-0 min-h-0 max-w-prose">
<p>前回は <a href=/2015/07/gke-hello-wordpress-tutorial/>Wordpress のチュートリアルを試しました</a>、次はもう少し複雑な <a href=https://cloud.google.com/container-engine/docs/tutorials/guestbook>Guestbook Tutorial - Container Engine — Google Cloud Platform</a> をなぞります。</p>
<h2 id=create-a-container-engine-cluster class="relative group">Create a Container Engine cluster <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#create-a-container-engine-cluster aria-label=アンカー>#</a></span></h2>
<p><a href="https://cloud.google.com/container-engine/docs/clusters/?hl=ja">GKE クラスタ</a>を作成します</p>
<pre tabindex=0><code>$ gcloud beta container clusters create guestbook
Creating cluster guestbook...done.
Created [https://container.googleapis.com/v1/projects/PROJECTID/zones/asia-east1-c/clusters/guestbook].
kubeconfig entry generated for guestbook. To switch context to the cluster, run

$ kubectl config use-context gke_PROJECTID_asia-east1-c_guestbook

NAME       ZONE          MASTER_VERSION  MASTER_IP        MACHINE_TYPE   STATUS
guestbook  asia-east1-c  0.21.1          203.0.113.167    n1-standard-1  RUNNING
</code></pre><p>Wordpress の時はノード数と GCE インスタンスの g1-small を指定しましたが、今回は指定がありません。 どうなってるのか確認してみましょう。</p>
<pre tabindex=0><code>$ gcloud compute instances list
NAME                             ZONE         MACHINE_TYPE  PREEMPTIBLE INTERNAL_IP    EXTERNAL_IP     STATUS
gke-guestbook-f6a9e1a2-node-bjb5 asia-east1-c n1-standard-1             10.240.145.243 203.0.113.104   RUNNING
gke-guestbook-f6a9e1a2-node-woin asia-east1-c n1-standard-1             10.240.158.209 203.0.113.237   RUNNING
gke-guestbook-f6a9e1a2-node-zti0 asia-east1-c n1-standard-1             10.240.209.195 203.0.113.101   RUNNING
</code></pre><p>n1-standard-1 が3つ起動してますね。
n1-standard-1 は今日(2015/7/12)では1インスタンス $0.069/時間 のようです。<a href="https://cloud.google.com/compute/?hl=ja">https://cloud.google.com/compute/?hl=ja</a> 3ノードそれぞれで <code>docker ps</code> してみました。 fluentd (ログコレクション), <a href=https://github.com/coreos/etcd>etcd</a> (分散KVS), SkyDNS (etcd をバックエンドとした DNS サーバー), <a href=https://github.com/GoogleCloudPlatform/kubernetes/tree/master/cluster/addons/dns/kube2sky>kube2sky</a> (Kubernetes と SkyDNS のブリッジ), <a href=https://github.com/GoogleCloudPlatform/heapster>heapster</a> (リソースモニタリング) などが動いています。&ldquo;pause&rdquo; ってなんだろう？</p>
<pre tabindex=0><code>$ sudo docker ps -a --no-trunc=true
CONTAINER ID                                                       IMAGE                                       COMMAND                                                                                       CREATED             STATUS              PORTS               NAMES
7d406295a24dd57eac1af3e0023b943d613ed6f7424b937412d90d7374760205   gcr.io/google_containers/fluentd-gcp:1.8    &quot;\&quot;/bin/sh -c '/usr/sbin/google-fluentd \&quot;$FLUENTD_ARGS\&quot; &gt; /var/log/google-fluentd.log'\&quot;&quot;   4 minutes ago       Up 4 minutes                            k8s_fluentd-cloud-logging.7721935b_fluentd-cloud-logging-gke-guestbook-f6a9e1a2-node-bjb5_kube-system_d0feac1ad02da9e97c4bf67970ece7a1_85a07d24   
014716b09d6de5c5546cd7fac5fe7c420071dd513cdee552d82dda5106de7399   gcr.io/google_containers/heapster:v0.15.0   &quot;/heapster --source=kubernetes:''&quot;                                                            4 minutes ago       Up 4 minutes                            k8s_heapster.5ec26f85_monitoring-heapster-v5-emb1z_kube-system_f9c0a5a4-289e-11e5-9359-42010af03fdb_18db2cfe                                      
7c85c94394ce25d5092e41bf2f1cba1bf67984b3c1cc27ebb775ffab75bbc76f   gcr.io/google_containers/pause:0.8.0        &quot;/pause&quot;                                                                                      5 minutes ago       Up 5 minutes                            k8s_POD.e4cc795_monitoring-heapster-v5-emb1z_kube-system_f9c0a5a4-289e-11e5-9359-42010af03fdb_70f26e8e                                            
be3069e309c9bdf6bacab0b0a83b641de1b24232d2438bd7db0d755697038c29   gcr.io/google_containers/pause:0.8.0        &quot;/pause&quot;                                                                                      5 minutes ago       Up 5 minutes                            k8s_POD.e4cc795_fluentd-cloud-logging-gke-guestbook-f6a9e1a2-node-bjb5_kube-system_d0feac1ad02da9e97c4bf67970ece7a1_8f560911
</code></pre><pre tabindex=0><code>$ sudo docker ps -a --no-trunc=true
CONTAINER ID                                                       IMAGE                                      COMMAND                                                                                       CREATED             STATUS              PORTS               NAMES
d46086762093a7ae2b6885695afe3e6829e53f0546d1f8153c1c26d62038a5c3   gcr.io/google_containers/fluentd-gcp:1.8   &quot;\&quot;/bin/sh -c '/usr/sbin/google-fluentd \&quot;$FLUENTD_ARGS\&quot; &gt; /var/log/google-fluentd.log'\&quot;&quot;   16 minutes ago      Up 16 minutes                           k8s_fluentd-cloud-logging.7721935b_fluentd-cloud-logging-gke-guestbook-f6a9e1a2-node-woin_kube-system_d0feac1ad02da9e97c4bf67970ece7a1_334baa58   
78c2c76ddb6af757752ebab0494da0470c810bc9d4dd6dd4c76615b4b04540bd   gcr.io/google_containers/kube-ui:v1        &quot;/kube-ui&quot;                                                                                    16 minutes ago      Up 16 minutes                           k8s_kube-ui.e47d83a6_kube-ui-v1-gx17k_kube-system_f9c09a3f-289e-11e5-9359-42010af03fdb_8e9d5d77                                                   
d8460a693d20c6d4e2b2bf18700c1e7e589ea1c36e2c9d6c94c871227480c583   gcr.io/google_containers/pause:0.8.0       &quot;/pause&quot;                                                                                      16 minutes ago      Up 16 minutes                           k8s_POD.3b46e8b9_kube-ui-v1-gx17k_kube-system_f9c09a3f-289e-11e5-9359-42010af03fdb_cc87173f                                                       
e908771293b93ee52639fdf6400ff64338769c306252a6daa70f63fee3824703   gcr.io/google_containers/pause:0.8.0       &quot;/pause&quot;                                                                                      16 minutes ago      Up 16 minutes                           k8s_POD.e4cc795_fluentd-cloud-logging-gke-guestbook-f6a9e1a2-node-woin_kube-system_d0feac1ad02da9e97c4bf67970ece7a1_818f6b11
</code></pre><pre tabindex=0><code>$ sudo docker ps -a --no-trunc=true
CONTAINER ID                                                       IMAGE                                            COMMAND                                                                                                                                                                                       CREATED             STATUS              PORTS               NAMES
c688081b385db0e2008f10705d412501983c8a52a938692d64e6dee14a1bd74e   gcr.io/google_containers/skydns:2015-03-11-001   &quot;/skydns -machines=http://localhost:4001 -addr=0.0.0.0:53 -domain=cluster.local.&quot;                                                                                                             17 minutes ago      Up 17 minutes                           k8s_skydns.58dac13a_kube-dns-v6-qyyz6_kube-system_f9c0ad25-289e-11e5-9359-42010af03fdb_b864c5a2                                                   
ee5987aa158d726b376b327b12eb84457340a3d1c5e9fa93dc0d38f00131e2a5   gcr.io/google_containers/fluentd-gcp:1.8         &quot;\&quot;/bin/sh -c '/usr/sbin/google-fluentd \&quot;$FLUENTD_ARGS\&quot; &gt; /var/log/google-fluentd.log'\&quot;&quot;                                                                                                   17 minutes ago      Up 17 minutes                           k8s_fluentd-cloud-logging.7721935b_fluentd-cloud-logging-gke-guestbook-f6a9e1a2-node-zti0_kube-system_d0feac1ad02da9e97c4bf67970ece7a1_5a94cca9   
08c23fc0567836698bd44eec9bf07298657094ad1ef3a3fa79dc886ff5c46e68   gcr.io/google_containers/kube2sky:1.11           &quot;/kube2sky -domain=cluster.local&quot;                                                                                                                                                             17 minutes ago      Up 17 minutes                           k8s_kube2sky.a17e6ab0_kube-dns-v6-qyyz6_kube-system_f9c0ad25-289e-11e5-9359-42010af03fdb_4f7667c3                                                 
42dcd9cafab7def216f24f859615a3f90166e8971cfad6eb1ec88d8a8eaf8bba   gcr.io/google_containers/etcd:2.0.9              &quot;/usr/local/bin/etcd -listen-client-urls http://127.0.0.1:2379,http://127.0.0.1:4001 -advertise-client-urls http://127.0.0.1:2379,http://127.0.0.1:4001 -initial-cluster-token skydns-etcd&quot;   17 minutes ago      Up 17 minutes                           k8s_etcd.962798f6_kube-dns-v6-qyyz6_kube-system_f9c0ad25-289e-11e5-9359-42010af03fdb_30d92bc0                                                     
5bbad3fdb141277f4cff48851901bbf8c4e05821bf6aea9f2fb57b7914fd1fcd   gcr.io/google_containers/pause:0.8.0             &quot;/pause&quot;                                                                                                                                                                                      17 minutes ago      Up 17 minutes                           k8s_POD.8fdb0e41_kube-dns-v6-qyyz6_kube-system_f9c0ad25-289e-11e5-9359-42010af03fdb_59ac2004                                                      
9fbc741b98754aed17778101fd0ed5746f1a3acfb21191ca4686776dbc7ae0f6   gcr.io/google_containers/pause:0.8.0             &quot;/pause&quot;                                                                                                                                                                                      17 minutes ago      Up 17 minutes                           k8s_POD.e4cc795_fluentd-cloud-logging-gke-guestbook-f6a9e1a2-node-zti0_kube-system_d0feac1ad02da9e97c4bf67970ece7a1_4053a8c5

</code></pre><p>Linux distribution は Debian でした。</p>
<pre tabindex=0><code>$ cat /etc/os-release 
PRETTY_NAME=&quot;Debian GNU/Linux 7 (wheezy)&quot;
NAME=&quot;Debian GNU/Linux&quot;
VERSION_ID=&quot;7&quot;
VERSION=&quot;7 (wheezy)&quot;
ID=debian
ANSI_COLOR=&quot;1;31&quot;
HOME_URL=&quot;http://www.debian.org/&quot;
SUPPORT_URL=&quot;http://www.debian.org/support/&quot;
BUG_REPORT_URL=&quot;http://bugs.debian.org/&quot;
</code></pre><h2 id=step-one-start-the-redis-master class="relative group">Step one: Start the Redis master <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-one-start-the-redis-master aria-label=アンカー>#</a></span></h2>
<p>チュートリアルのサイトからダウンロードした <code>redis-master-controller.json</code> を使って pod を作成します。 この pod は<a href=https://cloud.google.com/container-engine/docs/pods/operations#pod_configuration_file>シングルコンテナ</a>です。</p>
<pre tabindex=0><code>$ kubectl create -f redis-master-controller.json
replicationcontrollers/redis-master
</code></pre><pre tabindex=0><code>$ kubectl get pods -l name=redis-master
POD                  IP          CONTAINER(S)   IMAGE(S)   HOST                                              LABELS              STATUS    CREATED      MESSAGE
redis-master-4qexb   10.16.1.4                             gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-master   Running   25 seconds   
                                 master         redis                                                                            Running   10 seconds
</code></pre><p><code>gke-guestbook-f6a9e1a2-node-bjb5</code> に pod が追加されたようなので、またログインして <code>docker ps</code> してみます。</p>
<pre tabindex=0><code>$ sudo docker ps -a --no-trunc=true
CONTAINER ID                                                       IMAGE                                       COMMAND                                                                                       CREATED             STATUS                        PORTS               NAMES
623c6f0e1312d0f3e40eb924d105f6ac4164a4e4bad5d60b52333c570e82c45a   gcr.io/google_containers/heapster:v0.15.0   &quot;/heapster --source=kubernetes:''&quot;                                                            4 minutes ago       Up 4 minutes                                      k8s_heapster.5ec26f85_monitoring-heapster-v5-emb1z_kube-system_f9c0a5a4-289e-11e5-9359-42010af03fdb_5fe2012f                                      
5be9079c528100f6b342ddd1bccb8d987f32acbc3cdf95adc393ce2c3d412553   redis:latest                                &quot;/entrypoint.sh redis-server&quot;                                                                 13 minutes ago      Up 13 minutes                                     k8s_master.3173469e_redis-master-4qexb_default_a613affd-28a3-11e5-9359-42010af03fdb_6129e534                                                      
14087860fcf4e6648493e4895dca603b3b014c865a7eb69f828cc0d9d2bb0120   gcr.io/google_containers/pause:0.8.0        &quot;/pause&quot;                                                                                      13 minutes ago      Up 13 minutes                                     k8s_POD.49eee8c2_redis-master-4qexb_default_a613affd-28a3-11e5-9359-42010af03fdb_e8510c23                                                         
8a2b8a55b671ea003aee66ef7b048140fd7de393c77667e2c9bdda0565128588   gcr.io/google_containers/heapster:v0.15.0   &quot;/heapster --source=kubernetes:''&quot;                                                            14 minutes ago      Exited (137) 4 minutes ago                        k8s_heapster.5ec26f85_monitoring-heapster-v5-emb1z_kube-system_f9c0a5a4-289e-11e5-9359-42010af03fdb_c28b7121                                      
a17c35601da8dd07abce20b554537f814ba4cf1355d72804574efce81b62c4d6   gcr.io/google_containers/heapster:v0.15.0   &quot;/heapster --source=kubernetes:''&quot;                                                            24 minutes ago      Exited (137) 14 minutes ago                       k8s_heapster.5ec26f85_monitoring-heapster-v5-emb1z_kube-system_f9c0a5a4-289e-11e5-9359-42010af03fdb_c3470740                                      
7d406295a24dd57eac1af3e0023b943d613ed6f7424b937412d90d7374760205   gcr.io/google_containers/fluentd-gcp:1.8    &quot;\&quot;/bin/sh -c '/usr/sbin/google-fluentd \&quot;$FLUENTD_ARGS\&quot; &gt; /var/log/google-fluentd.log'\&quot;&quot;   46 minutes ago      Up 46 minutes                                     k8s_fluentd-cloud-logging.7721935b_fluentd-cloud-logging-gke-guestbook-f6a9e1a2-node-bjb5_kube-system_d0feac1ad02da9e97c4bf67970ece7a1_85a07d24   
7c85c94394ce25d5092e41bf2f1cba1bf67984b3c1cc27ebb775ffab75bbc76f   gcr.io/google_containers/pause:0.8.0        &quot;/pause&quot;                                                                                      46 minutes ago      Up 46 minutes                                     k8s_POD.e4cc795_monitoring-heapster-v5-emb1z_kube-system_f9c0a5a4-289e-11e5-9359-42010af03fdb_70f26e8e                                            
be3069e309c9bdf6bacab0b0a83b641de1b24232d2438bd7db0d755697038c29   gcr.io/google_containers/pause:0.8.0        &quot;/pause&quot;                                                                                      46 minutes ago      Up 46 minutes                                     k8s_POD.e4cc795_fluentd-cloud-logging-gke-guestbook-f6a9e1a2-node-bjb5_kube-system_d0feac1ad02da9e97c4bf67970ece7a1_8f560911
</code></pre><p>これで 10.16.1.4 の 6379 port にアクセスすると Redis が起動していることが確認できます。 どれかの node に ssh してアクセスしてみます。</p>
<pre tabindex=0><code>$ gcloud compute ssh gke-guestbook-f6a9e1a2-node-zti0
</code></pre><p>telnet は入っていませんでしたが、nc コマンドがあったので試してみます</p>
<pre tabindex=0><code>$ echo info | nc 10.16.1.4 6379
$1886
# Server
redis_version:3.0.2
redis_git_sha1:00000000
redis_git_dirty:0
redis_build_id:4795df119e2d77fe
redis_mode:standalone
os:Linux 3.16.0-0.bpo.4-amd64 x86_64
arch_bits:64
multiplexing_api:epoll
gcc_version:4.7.2
process_id:1
run_id:24fbeb83eb004d5d6e3828f37bea703974a87606
tcp_port:6379
uptime_in_seconds:326
uptime_in_days:0
hz:10
lru_clock:10648884
config_file:

# Clients
connected_clients:1
client_longest_output_list:0
client_biggest_input_buf:0
blocked_clients:0

# Memory
used_memory:815912
used_memory_human:796.79K
used_memory_rss:3551232
used_memory_peak:815912
used_memory_peak_human:796.79K
used_memory_lua:36864
mem_fragmentation_ratio:4.35
mem_allocator:jemalloc-3.6.0

# Persistence
loading:0
rdb_changes_since_last_save:0
rdb_bgsave_in_progress:0
rdb_last_save_time:1436711918
rdb_last_bgsave_status:ok
rdb_last_bgsave_time_sec:-1
rdb_current_bgsave_time_sec:-1
aof_enabled:0
aof_rewrite_in_progress:0
aof_rewrite_scheduled:0
aof_last_rewrite_time_sec:-1
aof_current_rewrite_time_sec:-1
aof_last_bgrewrite_status:ok
aof_last_write_status:ok

# Stats
total_connections_received:2
total_commands_processed:1
instantaneous_ops_per_sec:0
total_net_input_bytes:20
total_net_output_bytes:1951
instantaneous_input_kbps:0.00
instantaneous_output_kbps:0.00
rejected_connections:0
sync_full:0
sync_partial_ok:0
sync_partial_err:0
expired_keys:0
evicted_keys:0
keyspace_hits:0
keyspace_misses:0
pubsub_channels:0
pubsub_patterns:0
latest_fork_usec:0
migrate_cached_sockets:0

# Replication
role:master
connected_slaves:0
master_repl_offset:0
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0

# CPU
used_cpu_sys:0.07
used_cpu_user:0.08
used_cpu_sys_children:0.00
used_cpu_user_children:0.00

# Cluster
cluster_enabled:0

# Keyspace
</code></pre><p><code>docker logs</code> コマンドで出力を確認できます。</p>
<pre tabindex=0><code>$ sudo docker logs 5be9079c528100f6b342ddd1bccb8d987f32acbc3cdf95adc393ce2c3d412553
1:C 12 Jul 14:38:38.271 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
                _._                                                  
           _.-``__ ''-._                                             
      _.-``    `.  `_.  ''-._           Redis 3.0.2 (00000000/0) 64 bit
  .-`` .-```.  ```\/    _.,_ ''-._                                   
 (    '      ,       .-`  | `,    )     Running in standalone mode
 |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379
 |    `-._   `._    /     _.-'    |     PID: 1
  `-._    `-._  `-./  _.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |           http://redis.io        
  `-._    `-._`-.__.-'_.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |                                  
  `-._    `-._`-.__.-'_.-'    _.-'                                   
      `-._    `-.__.-'    _.-'                                       
          `-._        _.-'                                           
              `-.__.-'                                               

1:M 12 Jul 14:38:38.272 # Server started, Redis version 3.0.2
1:M 12 Jul 14:38:38.272 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
1:M 12 Jul 14:38:38.272 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
1:M 12 Jul 14:38:38.272 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
1:M 12 Jul 14:38:38.272 * The server is now ready to accept connections on port 6379

</code></pre><h2 id=step-two-start-the-redis-masters-service class="relative group">Step two: Start the Redis master&rsquo;s service <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-two-start-the-redis-masters-service aria-label=アンカー>#</a></span></h2>
<p>次に<a href=https://cloud.google.com/container-engine/docs/services/>サービス</a>を設定します</p>
<pre tabindex=0><code>$ kubectl create -f redis-master-service.json
services/redis-master
</code></pre><pre tabindex=0><code>$ kubectl get services -l name=redis-master
NAME           LABELS              SELECTOR            IP(S)           PORT(S)
redis-master   name=redis-master   name=redis-master   10.19.253.109   6379/TCP
</code></pre><p>redis-master は1つだけなのでサービスを作っても代わり映えがしませんが、このアドレスを使ってアクセスします。pod が入れ替わってもこのアドレスは変わりません。次の redis slave は複数 pod のロードバランサー的に動作します。</p>
<h2 id=step-three-start-the-replicated-redis-worker-pods class="relative group">Step three: Start the replicated Redis worker pods <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-three-start-the-replicated-redis-worker-pods aria-label=アンカー>#</a></span></h2>
<p>今度は <a href=https://cloud.google.com/container-engine/docs/replicationcontrollers/>Replication Controller</a> で同じ pod を複数起動させ、その数をキープさせます。</p>
<pre tabindex=0><code>$ kubectl create -f redis-worker-controller.json
replicationcontrollers/redis-slave
</code></pre><p><code>redis-slave</code> は <code>REPLICAS</code> が2になっています</p>
<pre tabindex=0><code>$ kubectl get rc
CONTROLLER     CONTAINER(S)   IMAGE(S)                    SELECTOR            REPLICAS
redis-master   master         redis                       name=redis-master   1
redis-slave    slave          kubernetes/redis-slave:v2   name=redis-slave    2
</code></pre><p><code>kubectl get pods</code> も2つの pod が確認できます</p>
<pre tabindex=0><code>$ kubectl get pods -l name=redis-slave
POD                 IP        CONTAINER(S)   IMAGE(S)                    HOST                                LABELS             STATUS    CREATED          MESSAGE
redis-slave-a90om                                                        gke-guestbook-f6a9e1a2-node-woin/   name=redis-slave   Pending   About a minute   
                              slave          kubernetes/redis-slave:v2                                                                                     
redis-slave-xkeft                                                        gke-guestbook-f6a9e1a2-node-bjb5/   name=redis-slave   Pending   About a minute   
                              slave          kubernetes/redis-slave:v2
</code></pre><p>すぐだとまだ <code>Pending</code> でしたが、しばらくすると <code>Running</code> になりました。</p>
<pre tabindex=0><code>$ kubectl get pods -l name=redis-slave
POD                 IP          CONTAINER(S)   IMAGE(S)                    HOST                                              LABELS             STATUS    CREATED     MESSAGE
redis-slave-a90om   10.16.2.4                                              gke-guestbook-f6a9e1a2-node-woin/10.240.158.209   name=redis-slave   Running   7 minutes   
                                slave          kubernetes/redis-slave:v2                                                                        Running   5 minutes   
redis-slave-xkeft   10.16.1.5                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-slave   Running   7 minutes   
                                slave          kubernetes/redis-slave:v2                                                                        Running   5 minutes
</code></pre><h2 id=step-four-create-the-redis-worker-service class="relative group">Step four: Create the Redis worker service <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-four-create-the-redis-worker-service aria-label=アンカー>#</a></span></h2>
<p>redis-master 同様にサービスを作成します</p>
<pre tabindex=0><code>$ kubectl create -f redis-worker-service.json
services/redis-slave
</code></pre><pre tabindex=0><code>$ kubectl get services
NAME           LABELS                                    SELECTOR            IP(S)           PORT(S)
kubernetes     component=apiserver,provider=kubernetes   10.19.240.1     443/TCP
redis-master   name=redis-master                         name=redis-master   10.19.253.109   6379/TCP
redis-slave    name=redis-slave                          name=redis-slave    10.19.244.0     6379/TCP 
</code></pre><p><code>redis-slave</code> という名前ですが、これはほんとに replication されてるのか確認してみましょう master に問い合わせてみると2つの slave が接続されてることが確認できました。 slave0, slave1 のアドレスに見知らぬものが表示されてますね、これは NAPT でアドレス変換されているのでしょうか</p>
<pre tabindex=0><code>$ echo info replication | nc 10.16.1.4 6379
$309
# Replication
role:master
connected_slaves:2
slave0:ip=10.240.158.209,port=6379,state=online,offset=617,lag=0
slave1:ip=10.16.1.1,port=6379,state=online,offset=617,lag=1
master_repl_offset:617
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:2
repl_backlog_histlen:616
</code></pre><p>今度は slave に問い合わせてみました。 <code>master_host</code> には <code>redis-master</code> とあります。これは redis-master というサービスのアドレスが etcd によって名前解決できるようになっているわけですね（きっと）</p>
<pre tabindex=0><code>$ echo info replication | nc 10.16.2.4 6379
$363
# Replication
role:slave
master_host:redis-master
master_port:6379
master_link_status:up
master_last_io_seconds_ago:5
master_sync_in_progress:0
slave_repl_offset:743
slave_priority:100
slave_read_only:1
connected_slaves:0
master_repl_offset:0
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0
</code></pre><pre tabindex=0><code>$ echo info replication | nc 10.16.1.5 6379
$363
# Replication
role:slave
master_host:redis-master
master_port:6379
master_link_status:up
master_last_io_seconds_ago:6
master_sync_in_progress:0
slave_repl_offset:785
slave_priority:100
slave_read_only:1
connected_slaves:0
master_repl_offset:0
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0
</code></pre><h2 id=step-five-create-the-guestbook-web-server-pods class="relative group">Step five: Create the guestbook web server pods <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-five-create-the-guestbook-web-server-pods aria-label=アンカー>#</a></span></h2>
<p>次は <code>frontend</code> という名の web serveer をセットアップします。</p>
<pre tabindex=0><code>$ kubectl create -f frontend-controller.json
replicationcontrollers/frontend
</code></pre><pre tabindex=0><code>$ kubectl get rc
CONTROLLER     CONTAINER(S)   IMAGE(S)                                    SELECTOR            REPLICAS
frontend       php-redis      kubernetes/example-guestbook-php-redis:v2   name=frontend       3
redis-master   master         redis                                       name=redis-master   1
redis-slave    slave          kubernetes/redis-slave:v2                   name=redis-slave    2
</code></pre><p>まだ起動中でしょうか Pending ですね。</p>
<pre tabindex=0><code>$ kubectl get pods
POD                  IP          CONTAINER(S)   IMAGE(S)                                    HOST                                              LABELS              STATUS    CREATED      MESSAGE
frontend-ltoyt                                                                              gke-guestbook-f6a9e1a2-node-woin/                 name=frontend       Pending   47 seconds   
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                                                
frontend-o6dla                                                                              gke-guestbook-f6a9e1a2-node-bjb5/                 name=frontend       Pending   47 seconds   
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                                                
frontend-rurh0                                                                              gke-guestbook-f6a9e1a2-node-zti0/                 name=frontend       Pending   47 seconds   
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                                                
redis-master-4qexb   10.16.1.4                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-master   Running   50 minutes   
                                 master         redis                                                                                                             Running   50 minutes   
redis-slave-a90om    10.16.2.4                                                              gke-guestbook-f6a9e1a2-node-woin/10.240.158.209   name=redis-slave    Running   17 minutes   
                                 slave          kubernetes/redis-slave:v2                                                                                         Running   15 minutes   
redis-slave-xkeft    10.16.1.5                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-slave    Running   17 minutes   
                                 slave          kubernetes/redis-slave:v2                                                                                         Running   15 minutes
</code></pre><p>きました</p>
<pre tabindex=0><code>$ kubectl get pods
POD                  IP          CONTAINER(S)   IMAGE(S)                                    HOST                                              LABELS              STATUS    CREATED          MESSAGE
frontend-ltoyt       10.16.2.5                                                              gke-guestbook-f6a9e1a2-node-woin/10.240.158.209   name=frontend       Running   3 minutes        
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   About a minute   
frontend-o6dla       10.16.1.6                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=frontend       Running   3 minutes        
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   About a minute   
frontend-rurh0       10.16.0.4                                                              gke-guestbook-f6a9e1a2-node-zti0/10.240.209.195   name=frontend       Running   3 minutes        
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   About a minute   
redis-master-4qexb   10.16.1.4                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-master   Running   53 minutes       
                                 master         redis                                                                                                             Running   52 minutes       
redis-slave-a90om    10.16.2.4                                                              gke-guestbook-f6a9e1a2-node-woin/10.240.158.209   name=redis-slave    Running   19 minutes       
                                 slave          kubernetes/redis-slave:v2                                                                                         Running   18 minutes       
redis-slave-xkeft    10.16.1.5                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-slave    Running   19 minutes       
                                 slave          kubernetes/redis-slave:v2                                                                                         Running   18 minutes
</code></pre><p>これまでの流れでだいたいわかりました、次はサービスの設定ですね。</p>
<h2 id=step-six-create-a-guestbook-web-service-with-an-external-ip-and-open-up-the-firewall class="relative group">Step six: Create a guestbook web service with an external IP, and open up the firewall <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-six-create-a-guestbook-web-service-with-an-external-ip-and-open-up-the-firewall aria-label=アンカー>#</a></span></h2>
<p>redis の時とは違って今回は <code>type: LoadBalancer</code> という指定が入っています。ということは redis-slave は LoadBalancer ではないということなのかな。</p>
<pre tabindex=0><code>$ kubectl create -f frontend-service.json
services/frontend
</code></pre><p><code>frontend</code> というサービスができました</p>
<pre tabindex=0><code>$ kubectl get services
NAME           LABELS                                    SELECTOR            IP(S)           PORT(S)
frontend       name=frontend                             name=frontend       10.19.248.123   80/TCP
kubernetes     component=apiserver,provider=kubernetes   10.19.240.1     443/TCP
redis-master   name=redis-master                         name=redis-master   10.19.253.109   6379/TCP
redis-slave    name=redis-slave                          name=redis-slave    10.19.244.0     6379/TCP 
</code></pre><p>次は <code>frontend</code> に外部からアクセスできるようにします</p>
<pre tabindex=0><code>$ kubectl get nodes
NAME                               LABELS                                                    STATUS
gke-guestbook-f6a9e1a2-node-bjb5   kubernetes.io/hostname=gke-guestbook-f6a9e1a2-node-bjb5   Ready
gke-guestbook-f6a9e1a2-node-woin   kubernetes.io/hostname=gke-guestbook-f6a9e1a2-node-woin   Ready
gke-guestbook-f6a9e1a2-node-zti0   kubernetes.io/hostname=gke-guestbook-f6a9e1a2-node-zti0   Ready
</code></pre><p>Wordpress のと同じように node の <code>NAME</code> の <code>-name</code> までを使います。この場合 <code>gke-guestbook-f6a9e1a2-node</code> ですね</p>
<pre tabindex=0><code>$ gcloud compute firewall-rules create --allow=tcp:80 \
    --target-tags=gke-guestbook-f6a9e1a2-node guestbook
Created [https://www.googleapis.com/compute/v1/projects/PROJECTID/global/firewalls/guestbook].
NAME      NETWORK SRC_RANGES RULES  SRC_TAGS TARGET_TAGS
guestbook default 0.0.0.0/0  tcp:80          gke-guestbook-f6a9e1a2-node
</code></pre><p>Gobal IP address を確認してアクセスしてみます (API の version 違いみたいな warning が表示されたけど)</p>
<pre tabindex=0><code>$ kubectl describe services frontend
Name:			frontend
Labels:			name=frontend
Selector:		name=frontend
Type:			LoadBalancer
IP:			10.19.248.123
LoadBalancer Ingress:	203.0.113.110
Port:			 80/TCP
NodePort:		 30698/TCP
Endpoints:		10.16.0.4:80,10.16.1.6:80,10.16.2.5:80
Session Affinity:	None
No events. 
</code></pre><p>LoadBalancer Ingress の IP アドレスの port 80 にアクセスしてみましょう</p>
<figure>
<img class="my-0 rounded-md" srcset="/2015/07/gke-guestbook-tutorial/gke-guestbook_hu14f735a463dc2ead854d129f04b961e4_8148_330x0_resize_box_3.png 330w,
/2015/07/gke-guestbook-tutorial/gke-guestbook_hu14f735a463dc2ead854d129f04b961e4_8148_660x0_resize_box_3.png 660w,
/2015/07/gke-guestbook-tutorial/gke-guestbook_hu14f735a463dc2ead854d129f04b961e4_8148_1024x0_resize_box_3.png 1024w,
/2015/07/gke-guestbook-tutorial/gke-guestbook_hu14f735a463dc2ead854d129f04b961e4_8148_1320x0_resize_box_3.png 2x" src=/2015/07/gke-guestbook-tutorial/gke-guestbook_hu14f735a463dc2ead854d129f04b961e4_8148_660x0_resize_box_3.png alt>
<figcaption>GKE Tutorial Guestbook</figcaption>
</figure>
<p>わーい</p>
<h2 id=resizing-a-replication-controller-changing-the-number-of-web-servers class="relative group">Resizing a replication controller: Changing the number of web servers <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#resizing-a-replication-controller-changing-the-number-of-web-servers aria-label=アンカー>#</a></span></h2>
<p><code>frontend</code> の数を3から5に増やしてみましょう。Docker なので増やすのは簡単そうです、kubernetes では次の1行です</p>
<pre tabindex=0><code>$ kubectl scale --replicas=5 rc frontend
</code></pre><p>増えましたね</p>
<pre tabindex=0><code>$ kubectl get pods
POD                  IP          CONTAINER(S)   IMAGE(S)                                    HOST                                              LABELS              STATUS    CREATED         MESSAGE
frontend-ltoyt       10.16.2.5                                                              gke-guestbook-f6a9e1a2-node-woin/10.240.158.209   name=frontend       Running   31 minutes      
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   28 minutes      
frontend-o6dla       10.16.1.6                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=frontend       Running   31 minutes      
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   28 minutes      
frontend-rurh0       10.16.0.4                                                              gke-guestbook-f6a9e1a2-node-zti0/10.240.209.195   name=frontend       Running   31 minutes      
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   28 minutes      
frontend-t67ho       10.16.2.6                                                              gke-guestbook-f6a9e1a2-node-woin/10.240.158.209   name=frontend       Running   18 seconds      
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   18 seconds      
frontend-xn9hx       10.16.0.5                                                              gke-guestbook-f6a9e1a2-node-zti0/10.240.209.195   name=frontend       Running   18 seconds      
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   18 seconds      
redis-master-4qexb   10.16.1.4                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-master   Running   About an hour   
                                 master         redis                                                                                                             Running   About an hour   
redis-slave-a90om    10.16.2.4                                                              gke-guestbook-f6a9e1a2-node-woin/10.240.158.209   name=redis-slave    Running   47 minutes      
                                 slave          kubernetes/redis-slave:v2                                                                                         Running   45 minutes      
redis-slave-xkeft    10.16.1.5                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-slave    Running   47 minutes      
                                 slave          kubernetes/redis-slave:v2                                                                                         Running   45 minutes
</code></pre><p>減らすのも同様です</p>
<pre tabindex=0><code>$ kubectl scale --replicas=1 rc frontend
scaled
</code></pre><p>減った</p>
<pre tabindex=0><code>$ kubectl get pods
POD                  IP          CONTAINER(S)   IMAGE(S)                                    HOST                                              LABELS              STATUS    CREATED         MESSAGE
frontend-o6dla       10.16.1.6                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=frontend       Running   32 minutes      
                                 php-redis      kubernetes/example-guestbook-php-redis:v2                                                                         Running   30 minutes      
redis-master-4qexb   10.16.1.4                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-master   Running   About an hour   
                                 master         redis                                                                                                             Running   About an hour   
redis-slave-a90om    10.16.2.4                                                              gke-guestbook-f6a9e1a2-node-woin/10.240.158.209   name=redis-slave    Running   48 minutes      
                                 slave          kubernetes/redis-slave:v2                                                                                         Running   47 minutes      
redis-slave-xkeft    10.16.1.5                                                              gke-guestbook-f6a9e1a2-node-bjb5/10.240.145.243   name=redis-slave    Running   48 minutes      
                                 slave          kubernetes/redis-slave:v2                                                                                         Running   47 minutes
</code></pre><h2 id=cleanup class="relative group">Cleanup <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#cleanup aria-label=アンカー>#</a></span></h2>
<p>破産しないように忘れずにお掃除を。</p>
<pre tabindex=0><code>$ kubectl delete services frontend
services/frontend
</code></pre><pre tabindex=0><code>$ gcloud beta container clusters delete guestbook
The following clusters will be deleted.
 - [guestbook] in [asia-east1-c]

Do you want to continue (Y/n)?  Y

Deleting cluster guestbook...done.
Deleted [https://container.googleapis.com/v1/projects/PROJECTID/zones/asia-east1-c/clusters/guestbook].
</code></pre><pre tabindex=0><code>$ gcloud compute firewall-rules delete guestbook
The following firewalls will be deleted:
 - [guestbook]

Do you want to continue (Y/n)?  y

Deleted [https://www.googleapis.com/compute/v1/projects/PROJECTID/global/firewalls/guestbook].
</code></pre><p>念の為 <a href=https://console.developers.google.com/>https://console.developers.google.com/</a> で消えてることを確認してみましょうか Pod, Replication Controller, Service を設定するための YAML / JSON について調べるといろいろわかるのかな</p>
</div>
<script>var liked_article=!1,oid,id,viewed,oid_likes,id_likes,liked;typeof auth!='undefined'&&(oid="views_posts/gke-guestbook-tutorial/index.md",id=oid&&oid.replaceAll("/","-"),viewed=localStorage.getItem(id),viewed||auth.signInAnonymously().then(()=>{var a=db.collection('views').doc(id);localStorage.setItem(id,!0),a.get().then(a=>{a.exists?db.collection('views').doc(id).update({views:firebase.firestore.FieldValue.increment(1)}):db.collection('views').doc(id).set({views:1})}).catch(a=>{console.log("Error getting document:",a)})}).catch(a=>{var b=a.code,c=a.message;console.error(b,c)}),oid_likes="likes_posts/gke-guestbook-tutorial/index.md",id_likes=oid_likes&&oid_likes.replaceAll("/","-"),liked=localStorage.getItem(id_likes),liked&&(liked_article=!0,document.querySelectorAll("button[id='likes_button']")[0].innerText="Remove Like"));function like_article(a){console.log("add"),liked_article=!0,localStorage.setItem(a,!0),document.querySelectorAll("button[id='likes_button']")[0].innerText="Remove Like",auth.signInAnonymously().then(()=>{var b=db.collection('likes').doc(a);b.get().then(b=>{b.exists?db.collection('likes').doc(a).update({likes:firebase.firestore.FieldValue.increment(1)}):db.collection('likes').doc(a).set({likes:1})}).catch(a=>{console.log("Error getting document:",a)})}).catch(a=>{var b=a.code,c=a.message;console.error(b,c)})}function remove_like_article(a){console.log("remove"),liked_article=!1,localStorage.setItem(a,!1),document.querySelectorAll("button[id='likes_button']")[0].innerText="Like",auth.signInAnonymously().then(()=>{var b=db.collection('likes').doc(a);b.get().then(b=>{b.exists?db.collection('likes').doc(a).update({likes:firebase.firestore.FieldValue.increment(-1)}):db.collection('likes').doc(a).set({likes:0})}).catch(a=>{console.log("Error getting document:",a)})}).catch(a=>{var b=a.code,c=a.message;console.error(b,c)})}function process_article(){var a="likes_posts/gke-guestbook-tutorial/index.md",b=a&&a.replaceAll("/","-");liked_article?remove_like_article(b):like_article(b)}</script>
</section>
<footer class="pt-8 max-w-prose print:hidden">
<div class=flex>
<div class=place-self-center>
<div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
著者
</div>
<div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
Yoshinori Teraoka
</div>
<div class="text-2xl sm:text-lg">
<div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://twitter.com/yteraoka target=_blank aria-label=Twitter rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
</a>
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/yteraoka target=_blank aria-label=Github rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
</a>
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/fa5b66b7-9c77-4e1b-8b97-40ba4a5a2c13/ target=_blank aria-label=Linkedin rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span>
</a>
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://medium.com/@yteraoka target=_blank aria-label=Medium rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M180.5 74.262C80.813 74.262.0 155.633.0 256S80.819 437.738 180.5 437.738 361 356.373 361 256 280.191 74.262 180.5 74.262zm288.25 10.646c-49.845.0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559C559 161.5 518.6 84.908 468.752 84.908zm139.506 17.821c-17.526.0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271z"/></svg>
</span>
</a>
</div>
</div>
</div>
</div>
<section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
<a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&url=https://preview-blog.1q77.com/2015/07/gke-guestbook-tutorial/&title=GKE%20Guestbook%20%e3%83%81%e3%83%a5%e3%83%bc%e3%83%88%e3%83%aa%e3%82%a2%e3%83%ab%e3%82%92%e8%a9%a6%e3%81%99" title=LinkedInでシェアする aria-label=LinkedInでシェアする>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span>
</a>
<a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://preview-blog.1q77.com/2015/07/gke-guestbook-tutorial/&text=GKE%20Guestbook%20%e3%83%81%e3%83%a5%e3%83%bc%e3%83%88%e3%83%aa%e3%82%a2%e3%83%ab%e3%82%92%e8%a9%a6%e3%81%99" title=Twitterに投稿する aria-label=Twitterに投稿する>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
</a>
</section>
<div class=pt-8>
<hr class="border-dotted border-neutral-300 dark:border-neutral-600">
<div class="flex justify-between pt-3">
<span>
<a class="flex group" href=/2015/07/gke-hello-wordpress-tutorial/>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col">
<span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">GKE Hello Wordpress チュートリアルを試す</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
<time datetime="2015-07-12 16:10:56 +0000 UTC">2015年7月12日</time>
</span>
</span>
</a>
</span>
<span>
<a class="flex text-right group" href=/2015/08/take-the-lg-g2-mini-to-pieces/>
<span class="flex flex-col">
<span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">LG G2 mini を分解してみた</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
<time datetime="2015-08-08 02:14:45 +0000 UTC">2015年8月8日</time>
</span>
</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
</a>
</span>
</div>
</div>
</footer>
</article>
<div class="pointer-events-none absolute top-[100vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
<a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=TOPへスクロール title=TOPへスクロール>
&uarr;
</a>
</div>
</main><footer class="py-10 print:hidden">
<div class="flex items-center justify-between">
<p class="text-sm text-neutral-500 dark:text-neutral-400">
&copy;
2022
Yoshinori Teraoka
</p>
</div>
<script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:'rgba(0,0,0,0.5)',scrollOffset:0})</script>
<script type=text/javascript src=/js/process.min.48d08339b8a087b59c7b8cb42b6717aeeed3e07bfc68b1654cac27f00583284dac59cae47fb686dd7c0e9ff1d2745689dc2071230dff432ca6d7fc24b9f2e036.js integrity="sha512-SNCDObigh7Wce4y0K2cXru7T4Hv8aLFlTKwn8AWDKE2sWcrkf7aG3XwOn/HSdFaJ3CBxIw3/Qyym1/wkufLgNg=="></script>
</footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://preview-blog.1q77.com/>
<div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
<header class="relative z-10 flex items-center justify-between flex-none px-2">
<form class="flex items-center flex-auto min-w-0">
<div class="flex items-center justify-center w-8 h-8 text-neutral-400">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</div>
<input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0>
</form>
<button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="閉じる (Esc)">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
</button>
</header>
<section class="flex-auto px-2 overflow-auto">
<ul id=search-results>
</ul>
</section>
</div>
</div>
</div>
</body>
</html>