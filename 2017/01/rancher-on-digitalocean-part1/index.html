<!doctype html><html lang=ja dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head>
<meta charset=utf-8>
<meta http-equiv=content-language content="ja">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>DigitalOcean にて Rancher を試す - その1 &#183; 1Q77</title>
<meta name=title content="DigitalOcean にて Rancher を試す - その1 &#183; 1Q77">
<link rel=canonical href=https://preview-blog.1q77.com/2017/01/rancher-on-digitalocean-part1/>
<link type=text/css rel=stylesheet href=/css/main.bundle.min.a9d40529d239a91ecb75447e67ee6c80c1f1c28593904b4052651b12220121e13ec42904268b0193a6858f039cf8bfdd2b1331529ed341ddc7488cec3bdcbc2e.css integrity="sha512-qdQFKdI5qR7LdUR+Z+5sgMHxwoWTkEtAUmUbEiIBIeE+xCkEJosBk6aFjwOc+L/dKxMxUp7TQd3HSIzsO9y8Lg==">
<script type=text/javascript src=/js/main.min.cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e.js integrity="sha512-z4PhNX7vuL3xVChQ1m2AB9Yg5AULVxXcg/SpIdNs6c5H0NE8XYXysP+DGNKHfuwvY7kxvUdBeoGlODJ6+SfaPg=="></script>
<script type=text/javascript src=/js/appearance.min.49025a779c36ad37a5bf9f1cc6bffd35ccb69ce15560ef1b10057ddf31576265b19f8bcc1733207336c9144926f7b18aea2e5895f29e858b24271332a2fa5cd5.js integrity="sha512-SQJad5w2rTelv58cxr/9Ncy2nOFVYO8bEAV93zFXYmWxn4vMFzMgczbJFEkm97GK6i5YlfKehYskJxMyovpc1Q=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.34ee8372ff77835535e486c6ed01ff6993374a1cec8108898cad793fc6ae7520778e24db68e085c762d25af6fa7d00b57d7a791438dc68b676581f8c8344f6e0.js integrity="sha512-NO6Dcv93g1U15IbG7QH/aZM3ShzsgQiJjK15P8audSB3jiTbaOCFx2LSWvb6fQC1fXp5FDjcaLZ2WB+Mg0T24A==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<meta property="og:title" content="DigitalOcean にて Rancher を試す - その1">
<meta property="og:description" content="Docker 1.11 の Swarm クラスタを運用しているものの、Kubernetes に切り替えようかなと考えていて Rancher って便利なのかな？と思い Rancher Meetup Tokyo #3 に参加してきました">
<meta property="og:type" content="article">
<meta property="og:url" content="https://preview-blog.1q77.com/2017/01/rancher-on-digitalocean-part1/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-01-12T15:32:28+00:00">
<meta property="article:modified_time" content="2017-01-12T15:32:28+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="DigitalOcean にて Rancher を試す - その1">
<meta name=twitter:description content="Docker 1.11 の Swarm クラスタを運用しているものの、Kubernetes に切り替えようかなと考えていて Rancher って便利なのかな？と思い Rancher Meetup Tokyo #3 に参加してきました">
<script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"DigitalOcean にて Rancher を試す - その1","headline":"DigitalOcean にて Rancher を試す - その1","abstract":"Docker 1.11 の Swarm クラスタを運用しているものの、Kubernetes に切り替えようかなと考えていて Rancher って便利なのかな？と思い Rancher Meetup Tokyo #3 に参加してきました","inLanguage":"ja","url":"https:\/\/preview-blog.1q77.com\/2017\/01\/rancher-on-digitalocean-part1\/","author":{"@type":"Person","name":"Yoshinori Teraoka"},"copyrightYear":"2017","dateCreated":"2017-01-12T15:32:28\u002b00:00","datePublished":"2017-01-12T15:32:28\u002b00:00","dateModified":"2017-01-12T15:32:28\u002b00:00","keywords":["Docker","Rancher"],"mainEntityOfPage":"true","wordCount":"2643"}]</script>
<meta name=author content="Yoshinori Teraoka">
<link href=https://twitter.com/yteraoka rel=me>
<link href=https://github.com/yteraoka rel=me>
<link href=https://linkedin.com/in/fa5b66b7-9c77-4e1b-8b97-40ba4a5a2c13/ rel=me>
<link href=https://medium.com/@yteraoka rel=me>
<link rel=stylesheet href=https://rsms.me/inter/inter.css>
</head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32">
<div id=the-top class="absolute flex self-center">
<a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>メインコンテンツへスキップ</a>
</div>
<div style=padding-left:0;padding-right:0 class="flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
<div class="flex flex-1 items-center justify-between">
<nav class="flex space-x-3">
<a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">1Q77</a>
</nav>
<div class="hidden md:flex items-center space-x-5 md:ml-12">
<a href=/posts/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=Posts>
Blog
</a>
<a href=/tags/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=Tags>
Tags
</a>
<a href=https://github.com/yteraoka class="text-base font-medium text-gray-500 hover:text-gray-900" title>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
&nbsp;
GitHub
</a>
<a href=https://twitter.com/yteraoka class="text-base font-medium text-gray-500 hover:text-gray-900" title>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
&nbsp;
Twitter
</a>
<a href=https://qiita.com/yteraoka class="text-base font-medium text-gray-500 hover:text-gray-900" title>
Qiita
</a>
<button id=search-button class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</button>
<div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400">
<button id=appearance-switcher type=button>
<div class="flex items-center justify-center h-12 dark:hidden">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg>
</span>
</div>
<div class="items-center justify-center hidden h-12 dark:flex">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg>
</span>
</div>
</button>
</div>
</div>
<div class="flex md:hidden items-center space-x-5 md:ml-12">
<span></span>
<button id=search-button-mobile class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</button>
<button id=appearance-switcher-mobile type=button style=margin-right:5px>
<div class="flex items-center justify-center h-12 dark:hidden">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg>
</span>
</div>
<div class="items-center justify-center hidden h-12 dark:flex">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg>
</span>
</div>
</button>
</div>
</div>
<div class="-my-2 -mr-2 md:hidden">
<label id=menu-button for=menu-controller class=block>
<input type=checkbox id=menu-controller class=hidden>
<div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg>
</span>
</div>
<div id=menu-wrapper style=padding-top:25px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
<ul class="flex movedown flex-col w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl sm:px-14 md:px-24 lg:px-32 sm:py-10 sm:pt-10">
<li class=mb-1>
<span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
</span>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>
Blog
</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>
Tags
</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://github.com/yteraoka title>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
&nbsp;
GitHub
</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://twitter.com/yteraoka title>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
&nbsp;
Twitter
</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://qiita.com/yteraoka title>
Qiita
</a>
</li>
</ul>
</div>
</label>
</div>
</div>
<div id=mobile-menu class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
<ul class="flex movedown flex-col w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl sm:px-14 md:px-24 lg:px-32 sm:py-10 sm:pt-10">
<li class=mb-1>
<span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
</span>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>Blog</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Tags</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://github.com/yteraoka title>GitHub</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://twitter.com/yteraoka title>Twitter</a>
</li>
<li class=mb-1>
<a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://qiita.com/yteraoka title>Qiita</a>
</li>
<li>
<button id=search-button-mobile class="text-base hover:text-primary-600 dark:hover:text-primary-400">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</button>
</li>
</ul>
</div>
<div class="relative flex flex-col grow">
<main id=main-content class=grow>
<article>
<header class=max-w-prose>
<ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
<li class="inline hidden">
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>1Q77</a><span class="px-1 text-primary-500">/</span>
</li>
<li class=inline>
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span>
</li>
<li class="inline hidden">
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/2017/01/rancher-on-digitalocean-part1/>DigitalOcean にて Rancher を試す - その1</a><span class="px-1 text-primary-500">/</span>
</li>
</ol>
<h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
DigitalOcean にて Rancher を試す - その1
</h1>
<div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
<div class="flex flex-row flex-wrap items-center">
<time datetime="2017-01-12 15:32:28 +0000 UTC">2017年1月12日</time>
</div>
<div class="flex flex-row flex-wrap items-center">
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/docker/")'>
<span class=flex>
<span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
Docker
</span>
</span>
</span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/rancher/")'>
<span class=flex>
<span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
Rancher
</span>
</span>
</span>
</div>
</div>
</header>
<section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
<div class="order-first px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8">
<div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10">
<details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
<summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
目次
</summary>
<div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#rancher-server-の起動>Rancher Server の起動</a></li>
<li><a href=#認証設定>認証設定</a></li>
<li><a href=#環境の追加>環境の追加</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</details>
<details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
<summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
目次
</summary>
<div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#rancher-server-の起動>Rancher Server の起動</a></li>
<li><a href=#認証設定>認証設定</a></li>
<li><a href=#環境の追加>環境の追加</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</details>
</div>
</div>
<div class="min-w-0 min-h-0 max-w-prose">
<p>Docker 1.11 の Swarm クラスタを運用しているものの、Kubernetes に切り替えようかなと考えていて <a href=http://rancher.com/>Rancher</a> って便利なのかな？と思い Rancher Meetup Tokyo #3 に参加してきました。
Rancher Labs の VP of Sales である Shannon Williams さんが多くの導入事例を発表されました。
<a href=https://www.youtube.com/channel/UCh5Xtp82q8wjijP8npkVTBA/www.rancher.com>youtube</a> に Case Study が沢山あるようです。
Version 2.0 では RBAC が導入されるようでエンタープライズ環境に入れやすくなりそうです。
さて、DigitalOcean のチュートリアルに <a href=https://www.digitalocean.com/community/tutorials/how-to-manage-multi-node-deployments-with-rancher-and-docker-machine-on-ubuntu-16-04>How To Manage Multi-Node Deployments with Rancher and Docker Machine on Ubuntu 16.04</a> というものがありました。
Rancher で何ができるのかを確認するためにこれをなぞってみます。
Rancher は Server と Agent があり、どちらもコンテナとして起動し、Agent が Server に接続にいく感じらしい。</p>
<h3 id=rancher-server-の起動 class="relative group">Rancher Server の起動 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#rancher-server-%e3%81%ae%e8%b5%b7%e5%8b%95 aria-label=アンカー>#</a></span></h3>
<p>チュートリアルにある手順ではブラウザから操作するようになっていますが、ここでは <a href=https://github.com/digitalocean/doctl>doctl</a> を使います。 （サーバー1台起動させるだけなのでブラウザからの操作で十分ではあります）
Docker インストール済みの Ubuntu 16.04 のイメージを使います CLI で指定するイメージ名を確認します</p>
<pre tabindex=0><code>ytera@vaio:~$ doctl compute image list | awk '(NR == 1 || /Docker/) {print $0}'
ID		Name							Type		Distribution	Slug			Public	Min Disk
20842141	Docker 1.12.2 on 14.04					snapshot	Ubuntu		docker			true	20
21543639	Docker 1.12.4 on 16.04					snapshot	Ubuntu					true	20
21968259	Docker 1.12.5 on 16.04					snapshot	Ubuntu		docker-16-04		true	20
</code></pre><p><strong>docker-16-04</strong> ですね 1GB メモリのインスタンスを起動するので <strong>size</strong> は <strong>1gb</strong> と指定します</p>
<pre tabindex=0><code>$ doctl compute size list 
Slug	Memory	VCPUs	Disk	Price Monthly	Price Hourly
512mb	512	1	20	5.00		0.007440
1gb	1024	1	30	10.00		0.014880
2gb	2048	2	40	20.00		0.029760
4gb	4096	2	60	40.00		0.059520
8gb	8192	4	80	80.00		0.119050
16gb	16384	8	160	160.00		0.238100
m-16gb	16384	2	30	120.00		0.178570
32gb	32768	12	320	320.00		0.476190
m-32gb	32768	4	90	240.00		0.357140
48gb	49152	16	480	480.00		0.714290
m-64gb	65536	8	200	480.00		0.714290
64gb	65536	20	640	640.00		0.952380
m-128gb	131072	16	340	960.00		1.428570
m-224gb	229376	32	500	1680.00		2.500000
</code></pre><p><strong>region</strong> は一番近いシンガポールにするので <strong>spg1</strong></p>
<pre tabindex=0><code>$ doctl compute region list | awk '(NR == 1 || /Singapore/) {print $0}'
Slug	Name		Available
sgp1	Singapore 1	true
</code></pre><p>Rancher サーバーは docker コンテナとして起動するだけなので次のスクリプトを <strong>user data</strong> として渡せばサーバーの作成とともに Rancher サーバーまで起動できます。</p>
<pre tabindex=0><code>#!/bin/bash
docker run -d --name rancher-server -p 80:8080 rancher/server
</code></pre><p>これを user-data.txt として保存します。<strong>rancher/server</strong> イメージでホストの port 80 にコンテナを port 8080 をマップして起動させるだけ。
ssh の public key 指定は <strong>doctl compute ssh-key list</strong> で ID を確認して指定します いよいよサーバーの作成です</p>
<pre tabindex=0><code>$ doctl compute droplet create rancher-server --image docker-16-04 --region sgp1 --size 1gb --ssh-keys 76364 --user-data-file user-data.txt --wait
Notice: extracting volumes from []string{}


ID		Name		Public IPv4	Public IPv6	Memory	VCPUs	Disk	Region	Image				Status	Tags
37021557	rancher-server	128.199.xxx.yyy			1024	1	30	sgp1	Ubuntu Docker 1.12.5 on 16.04	active	
</code></pre><p>起動しました。</p>
<pre tabindex=0><code>$ doctl compute ssh rancher-server
Welcome to Ubuntu 16.04.1 LTS (GNU/Linux 4.4.0-57-generic x86_64)

...

Last login: Thu Jan 12 10:22:56 2017 from 124.211.xxx.yyy
root@rancher-server:~# 
</code></pre><p>イメージの pull にすこし時間がかかりますが待っていると Rancher server が起動します</p>
<pre tabindex=0><code>root@rancher-server:~# docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                            NAMES
da3eda013332        rancher/server      &quot;/usr/bin/entry /usr/&quot;   43 seconds ago      Up 41 seconds       3306/tcp, 0.0.0.0:80-&gt;8080/tcp   rancher-server
</code></pre><p>ブラウザで port 80 にアクセスしてみます。</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/welcome_to_rancher_hu0867dc121bd0f38b714da48d4aac7cef_45682_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/welcome_to_rancher_hu0867dc121bd0f38b714da48d4aac7cef_45682_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/welcome_to_rancher_hu0867dc121bd0f38b714da48d4aac7cef_45682_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/welcome_to_rancher_hu0867dc121bd0f38b714da48d4aac7cef_45682_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/welcome_to_rancher_hu0867dc121bd0f38b714da48d4aac7cef_45682_660x0_resize_box_3.png alt>
<figcaption>Welcome to Rancher</figcaption>
</figure>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_user_stacks_hu267dd5ef26f40e11e2b43a43466f0982_92849_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_user_stacks_hu267dd5ef26f40e11e2b43a43466f0982_92849_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_user_stacks_hu267dd5ef26f40e11e2b43a43466f0982_92849_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_user_stacks_hu267dd5ef26f40e11e2b43a43466f0982_92849_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_user_stacks_hu267dd5ef26f40e11e2b43a43466f0982_92849_660x0_resize_box_3.png alt>
<figcaption>Rancher user stacks</figcaption>
</figure>
<p>こんな画面が表示されます。</p>
<h3 id=認証設定 class="relative group">認証設定 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e8%aa%8d%e8%a8%bc%e8%a8%ad%e5%ae%9a aria-label=アンカー>#</a></span></h3>
<p>初期状態では認証もなく誰でもアクセスできてしまうので、「<strong>ADMIN</strong>」→「<strong>Access Control</strong>」で認証設定を行います。</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_access_control_hu96bd4965a904d81b54698d8925c636eb_54660_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_hu96bd4965a904d81b54698d8925c636eb_54660_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_hu96bd4965a904d81b54698d8925c636eb_54660_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_hu96bd4965a904d81b54698d8925c636eb_54660_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_access_control_hu96bd4965a904d81b54698d8925c636eb_54660_660x0_resize_box_3.png alt>
<figcaption>Rancher Access Control</figcaption>
</figure>
<ul>
<li>Active Directory</li>
<li>Azure AD</li>
<li>GitHub</li>
<li>Local</li>
<li>OpenLDAP</li>
<li>Shibboleth</li>
</ul>
<p>から選択できます。</p>
<p><a href=https://docs.rancher.com/rancher/v1.3/en/configuration/access-control/>https://docs.rancher.com/rancher/v1.3/en/configuration/access-control/</a> ここではチュートリアルに沿って GitHub 認証を設定してみます GitHub にはアカウントがすでにある前提です。<a href=https://github.com/settings/developers>https://github.com/settings/developers</a> で新しいアプリケーションを作成します。</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/github_new_oauth_application_hu810e26ebd6ae00750e998847f46e2b4d_84609_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/github_new_oauth_application_hu810e26ebd6ae00750e998847f46e2b4d_84609_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/github_new_oauth_application_hu810e26ebd6ae00750e998847f46e2b4d_84609_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/github_new_oauth_application_hu810e26ebd6ae00750e998847f46e2b4d_84609_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/github_new_oauth_application_hu810e26ebd6ae00750e998847f46e2b4d_84609_660x0_resize_box_3.png alt>
<figcaption>GitHub Register a new OAuth application</figcaption>
</figure>
<p><strong>Homepage URL</strong>, <strong>Authorization callback URL</strong> にはさきほど作成した Rancher server の URL を指定します。これでアプリケーションを作成すると <strong>Client ID</strong>, <strong>Client Secret</strong> が得られるので、これを Rancher 側に設定すれば完了です。</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_hu7bfee90fe84e3e9098344c044dad5a23_150425_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_hu7bfee90fe84e3e9098344c044dad5a23_150425_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_hu7bfee90fe84e3e9098344c044dad5a23_150425_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_hu7bfee90fe84e3e9098344c044dad5a23_150425_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_hu7bfee90fe84e3e9098344c044dad5a23_150425_660x0_resize_box_3.png alt>
<figcaption>Rancher Access Control GitHub enabled</figcaption>
</figure>
<p>右下の <strong>English</strong> とあるところを <strong>日本語</strong> にすれば表示が日本語になります。</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_ja_hu83d45a4326daca06d7de00ddf85fe0b1_182564_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_ja_hu83d45a4326daca06d7de00ddf85fe0b1_182564_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_ja_hu83d45a4326daca06d7de00ddf85fe0b1_182564_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_ja_hu83d45a4326daca06d7de00ddf85fe0b1_182564_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_access_control_github_configration_ja_hu83d45a4326daca06d7de00ddf85fe0b1_182564_660x0_resize_box_3.png alt>
<figcaption>Rancher Access Control GitHub enabled (ja)</figcaption>
</figure>
<h3 id=環境の追加 class="relative group">環境の追加 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e7%92%b0%e5%a2%83%e3%81%ae%e8%bf%bd%e5%8a%a0 aria-label=アンカー>#</a></span></h3>
<p>Rancher はアプリ（コンテナ）のデプロイ先クラスタを Environment と呼び、これを複数管理することができるようです。
&ldquo;<strong>dev</strong>&rdquo;, &ldquo;<strong>test</strong>&rdquo;, &ldquo;<strong>production</strong>&rdquo; などをひとつの Rancher server から管理することができるということですね。
それぞれが別のクラウドサービスであってもそこから Rancher server へアクセスできれば問題なさそうです。</p>
<p>ここではその Environment を追加してみます。</p>
<p>上部メニューの <strong>Default</strong> とあるところが Environment のメニューで、そこにある <strong>Manage Environments</strong> を選択します。</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_manage_environments_hu78ae011b7ead20e992f2b6fa43d699fa_113614_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_manage_environments_hu78ae011b7ead20e992f2b6fa43d699fa_113614_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_manage_environments_hu78ae011b7ead20e992f2b6fa43d699fa_113614_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_manage_environments_hu78ae011b7ead20e992f2b6fa43d699fa_113614_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_manage_environments_hu78ae011b7ead20e992f2b6fa43d699fa_113614_660x0_resize_box_3.png alt>
<figcaption>Rancher Manage Environments</figcaption>
</figure>
<p><strong>Add Environment</strong> というボタンをクリック</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_add_environtment_huaf4f40d077b10e7035e02d8148671845_127859_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_environtment_huaf4f40d077b10e7035e02d8148671845_127859_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_environtment_huaf4f40d077b10e7035e02d8148671845_127859_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_environtment_huaf4f40d077b10e7035e02d8148671845_127859_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_add_environtment_huaf4f40d077b10e7035e02d8148671845_127859_660x0_resize_box_3.png alt>
<figcaption>Rancher Add Environtment</figcaption>
</figure>
<p>5つのテンプレートがあります <strong>Swarm</strong> は Swarmkit とあるので Docker 1.12 以降の swarm mode ですね</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Orchestration</th>
<th>Framework</th>
<th>Networking</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cattle</td>
<td>Cattle</td>
<td>Network Services, Scheduler, Healthcheck Service</td>
<td>Rancher IPsec</td>
</tr>
<tr>
<td>Kubernetes</td>
<td>Kubernetes</td>
<td>Network Services, Healthcheck Service</td>
<td>Rancher IPsec</td>
</tr>
<tr>
<td>Mesos</td>
<td>Mesos</td>
<td>Network Services, Scheduler, Healthcheck Service</td>
<td>Rancher IPsec</td>
</tr>
<tr>
<td>Swarm</td>
<td>SwarmKit</td>
<td>Network Services, Scheduler, Healthcheck Service</td>
<td>Rancher IPsec</td>
</tr>
<tr>
<td>Windows</td>
<td>Windows</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>テンプレートは次のようなかたちで追加することができます</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_add_template_hu11daab6ada10c9c6bc1bf7688b1cc8db_187519_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_template_hu11daab6ada10c9c6bc1bf7688b1cc8db_187519_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_template_hu11daab6ada10c9c6bc1bf7688b1cc8db_187519_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_template_hu11daab6ada10c9c6bc1bf7688b1cc8db_187519_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_add_template_hu11daab6ada10c9c6bc1bf7688b1cc8db_187519_660x0_resize_box_3.png alt>
<figcaption>Rancher Add Template</figcaption>
</figure>
<p>Name を <strong>k8s</strong> として <strong>Kubernetes</strong> テンプレートで Environment を作成してみました</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_environment_added_hu78ae011b7ead20e992f2b6fa43d699fa_105015_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_environment_added_hu78ae011b7ead20e992f2b6fa43d699fa_105015_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_environment_added_hu78ae011b7ead20e992f2b6fa43d699fa_105015_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_environment_added_hu78ae011b7ead20e992f2b6fa43d699fa_105015_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_environment_added_hu78ae011b7ead20e992f2b6fa43d699fa_105015_660x0_resize_box_3.png alt>
<figcaption>Rancher Environment Added</figcaption>
</figure>
<p>Environment を作成したらそこへホストを追加して Kubernetes を構築する必要がありますが、ホストさえ用意すれば後はテンプレートに従って Rancher がやってくれます 上部メニューの <strong>Default</strong> 部分を今作成した <strong>k8s</strong> に切り替えます
すると、次のような表示になりました</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_setting_up_kubernetes_hu6dddd98d336c24cb1a4b2d98182ecfdd_77092_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_setting_up_kubernetes_hu6dddd98d336c24cb1a4b2d98182ecfdd_77092_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_setting_up_kubernetes_hu6dddd98d336c24cb1a4b2d98182ecfdd_77092_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_setting_up_kubernetes_hu6dddd98d336c24cb1a4b2d98182ecfdd_77092_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_setting_up_kubernetes_hu6dddd98d336c24cb1a4b2d98182ecfdd_77092_660x0_resize_box_3.png alt>
<figcaption>Rancher Setting up Kubernetes</figcaption>
</figure>
<p>ぐるぐる回ってますが、ここで待っててもホストがないのでセットアップは進みません。上部メニューの <strong>INFRASTRUCTURE</strong> から <strong>Hosts</strong> を選択します</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_hosts_1_hub35243ffff4892b2840fa20236da5f4c_56826_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_hosts_1_hub35243ffff4892b2840fa20236da5f4c_56826_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_hosts_1_hub35243ffff4892b2840fa20236da5f4c_56826_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_hosts_1_hub35243ffff4892b2840fa20236da5f4c_56826_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_hosts_1_hub35243ffff4892b2840fa20236da5f4c_56826_660x0_resize_box_3.png alt>
<figcaption>Rancher Hosts</figcaption>
</figure>
<p>まだホストがないので <strong>Add Host</strong> で追加します</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_1_hud3bed4c12255c41006c142a213dac288_89710_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_1_hud3bed4c12255c41006c142a213dac288_89710_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_1_hud3bed4c12255c41006c142a213dac288_89710_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_1_hud3bed4c12255c41006c142a213dac288_89710_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_1_hud3bed4c12255c41006c142a213dac288_89710_660x0_resize_box_3.png alt>
<figcaption>Rancher Add DigitalOcean Host</figcaption>
</figure>
<p>今回は DigitalOcean なのでそれを選択し、Access Token を入力して次へ進みます Access Token は <a href=https://cloud.digitalocean.com/settings/api/tokens>https://cloud.digitalocean.com/settings/api/tokens</a> で取得します 上の図に表示されていないクラウドサービス用の Machine Driver もあります</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_machine_drivers_hu4e69eef0daf2edec5bc8e4cbc846aa71_187818_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_machine_drivers_hu4e69eef0daf2edec5bc8e4cbc846aa71_187818_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_machine_drivers_hu4e69eef0daf2edec5bc8e4cbc846aa71_187818_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_machine_drivers_hu4e69eef0daf2edec5bc8e4cbc846aa71_187818_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_machine_drivers_hu4e69eef0daf2edec5bc8e4cbc846aa71_187818_660x0_resize_box_3.png alt>
<figcaption>Rancher Machine Drivers</figcaption>
</figure>
<p>が、これは置いておいて DigitalOcean で進めます</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_2_huebe1da059ecdc559a1de4aeba79b6f52_129420_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_2_huebe1da059ecdc559a1de4aeba79b6f52_129420_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_2_huebe1da059ecdc559a1de4aeba79b6f52_129420_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_2_huebe1da059ecdc559a1de4aeba79b6f52_129420_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_2_huebe1da059ecdc559a1de4aeba79b6f52_129420_660x0_resize_box_3.png alt>
<figcaption>Rancher Add DigitalOcean Host (2)</figcaption>
</figure>
<p><strong>Name</strong>（数字部分は数にあわせてインクリメントされます）、<strong>Quantity</strong>（数）、<strong>Region</strong>、<strong>Image</strong>、<strong>Size</strong> 等を指定して <strong>Create</strong> をクリック</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_4_hu80a29305b874056fb9ab9c6f8b5e2b4b_62262_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_4_hu80a29305b874056fb9ab9c6f8b5e2b4b_62262_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_4_hu80a29305b874056fb9ab9c6f8b5e2b4b_62262_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_4_hu80a29305b874056fb9ab9c6f8b5e2b4b_62262_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_4_hu80a29305b874056fb9ab9c6f8b5e2b4b_62262_660x0_resize_box_3.png alt>
<figcaption>Rancher Add DigitalOcean Host (3)</figcaption>
</figure>
<p>このような感じで状態がどんどん変わってゆき、ついに Kubernetes クラスタが完成するのです</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_7_hu7318a875a66f0154bf16a2b9e46db8e3_289221_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_7_hu7318a875a66f0154bf16a2b9e46db8e3_289221_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_7_hu7318a875a66f0154bf16a2b9e46db8e3_289221_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_7_hu7318a875a66f0154bf16a2b9e46db8e3_289221_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_add_digitalocean_host_7_hu7318a875a66f0154bf16a2b9e46db8e3_289221_660x0_resize_box_3.png alt>
<figcaption>Rancher Add DigitalOcean Host (4)</figcaption>
</figure>
<p>ただただインスタンス（Droplet）のサイズと数を指定しただけで Kubernetes クラスタが完成しました。便利すぎる。</p>
<p>etcd が 3 つ必要なので 3 台用意しましたが、リソースさえ足りていれば2台でも1台でも大丈夫なようです。もちろんホストの故障を考えたら 3 台以上が必要です。</p>
<p>が、、なぜか Kubernetes へのコンテナのデプロイができないな&mldr; どこがおかしいのか&mldr; やっぱり、こういう場合に困るよなぁ</p>
<p><strong>KUBERNETES</strong> → <strong>Dashboard</strong> から Kubernetes Dashboard へアクセスできるはずですが Service Unavailable になってしまう ちなみにこの Kubernetes Dashboard は直接外からはアクセスできないため、Rancher server が proxy するようです。
Kubernetes を動かすには Droplet のサイズが小さすぎたかな？
（後で 2GB メモリのインスタンス 3 台で試したら Kubernetes Dashboard にもアクセスできました）</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_host_info_hu405a95803585c70bfb5d42addbf964cb_505486_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_host_info_hu405a95803585c70bfb5d42addbf964cb_505486_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_host_info_hu405a95803585c70bfb5d42addbf964cb_505486_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_host_info_hu405a95803585c70bfb5d42addbf964cb_505486_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_host_info_hu405a95803585c70bfb5d42addbf964cb_505486_660x0_resize_box_3.png alt>
<figcaption>Rancher Host Info</figcaption>
</figure>
<p>ちょっと Kubernetes 環境は置いておいて <strong>Default</strong> Environment にホストを追加してためしてみます。<strong>Default</strong> は <strong>Cattle</strong> なので単体の Docker ホストを追加して使うようです。Rancher の agent がコンテナとして稼働しています。</p>
<p>カタログから Wordpress stack を追加してみました</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack1_hu39071456887c4a5dd2f82342c774829c_117836_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack1_hu39071456887c4a5dd2f82342c774829c_117836_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack1_hu39071456887c4a5dd2f82342c774829c_117836_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack1_hu39071456887c4a5dd2f82342c774829c_117836_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack1_hu39071456887c4a5dd2f82342c774829c_117836_660x0_resize_box_3.png alt>
<figcaption>Rancher WordPress stack</figcaption>
</figure>
<p>Public Port を 80 に指定してある</p>
<figure>
<img class="my-0 rounded-md" srcset="/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack2_hu9dd3ff1d17966f290b66e294f10abe41_79403_330x0_resize_box_3.png 330w,
/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack2_hu9dd3ff1d17966f290b66e294f10abe41_79403_660x0_resize_box_3.png 660w,
/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack2_hu9dd3ff1d17966f290b66e294f10abe41_79403_1024x0_resize_box_3.png 1024w,
/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack2_hu9dd3ff1d17966f290b66e294f10abe41_79403_1320x0_resize_box_3.png 2x" src=/2017/01/rancher-on-digitalocean-part1/rancher_wordpress_stack2_hu9dd3ff1d17966f290b66e294f10abe41_79403_660x0_resize_box_3.png alt>
<figcaption>Rancher WordPress stack</figcaption>
</figure>
<p>起動しました。外からアクセスできました。ホストアドレスの Public Port で指定した port 80 でアクセスできました。</p>
<p>ということなので2つの Wordpress をひとつのホストでどちらも port 80 というわけにはいかないということですね。
<a href=http://docs.rancher.com/rancher/v1.3/en/cattle/scheduling/>Scheduling Services</a> に scheduling policies が書かれていました</p>
<ul>
<li>port conflicts</li>
<li>shared volumes</li>
<li>host tagging</li>
<li>shared network stack: –net=container:dependency</li>
<li>strict and soft affinity/anti-affinity rules by using both env var (Swarm) and labels (Rancher)</li>
</ul>
<p>Rancher の <a href=http://docs.rancher.com/rancher/v1.3/en/cattle/adding-load-balancers/>Load Balancer</a> というのがどういうものか気になっている 夜も更けてきたので続きは次回</p>
</div>
<script>var liked_article=!1,oid,id,viewed,oid_likes,id_likes,liked;typeof auth!='undefined'&&(oid="views_posts/rancher-on-digitalocean-part1/index.md",id=oid&&oid.replaceAll("/","-"),viewed=localStorage.getItem(id),viewed||auth.signInAnonymously().then(()=>{var a=db.collection('views').doc(id);localStorage.setItem(id,!0),a.get().then(a=>{a.exists?db.collection('views').doc(id).update({views:firebase.firestore.FieldValue.increment(1)}):db.collection('views').doc(id).set({views:1})}).catch(a=>{console.log("Error getting document:",a)})}).catch(a=>{var b=a.code,c=a.message;console.error(b,c)}),oid_likes="likes_posts/rancher-on-digitalocean-part1/index.md",id_likes=oid_likes&&oid_likes.replaceAll("/","-"),liked=localStorage.getItem(id_likes),liked&&(liked_article=!0,document.querySelectorAll("button[id='likes_button']")[0].innerText="Remove Like"));function like_article(a){console.log("add"),liked_article=!0,localStorage.setItem(a,!0),document.querySelectorAll("button[id='likes_button']")[0].innerText="Remove Like",auth.signInAnonymously().then(()=>{var b=db.collection('likes').doc(a);b.get().then(b=>{b.exists?db.collection('likes').doc(a).update({likes:firebase.firestore.FieldValue.increment(1)}):db.collection('likes').doc(a).set({likes:1})}).catch(a=>{console.log("Error getting document:",a)})}).catch(a=>{var b=a.code,c=a.message;console.error(b,c)})}function remove_like_article(a){console.log("remove"),liked_article=!1,localStorage.setItem(a,!1),document.querySelectorAll("button[id='likes_button']")[0].innerText="Like",auth.signInAnonymously().then(()=>{var b=db.collection('likes').doc(a);b.get().then(b=>{b.exists?db.collection('likes').doc(a).update({likes:firebase.firestore.FieldValue.increment(-1)}):db.collection('likes').doc(a).set({likes:0})}).catch(a=>{console.log("Error getting document:",a)})}).catch(a=>{var b=a.code,c=a.message;console.error(b,c)})}function process_article(){var a="likes_posts/rancher-on-digitalocean-part1/index.md",b=a&&a.replaceAll("/","-");liked_article?remove_like_article(b):like_article(b)}</script>
</section>
<footer class="pt-8 max-w-prose print:hidden">
<div class=flex>
<div class=place-self-center>
<div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
著者
</div>
<div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
Yoshinori Teraoka
</div>
<div class="text-2xl sm:text-lg">
<div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://twitter.com/yteraoka target=_blank aria-label=Twitter rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
</a>
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/yteraoka target=_blank aria-label=Github rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
</a>
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/fa5b66b7-9c77-4e1b-8b97-40ba4a5a2c13/ target=_blank aria-label=Linkedin rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span>
</a>
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://medium.com/@yteraoka target=_blank aria-label=Medium rel="me noopener noreferrer">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M180.5 74.262C80.813 74.262.0 155.633.0 256S80.819 437.738 180.5 437.738 361 356.373 361 256 280.191 74.262 180.5 74.262zm288.25 10.646c-49.845.0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559C559 161.5 518.6 84.908 468.752 84.908zm139.506 17.821c-17.526.0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271z"/></svg>
</span>
</a>
</div>
</div>
</div>
</div>
<section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
<a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&url=https://preview-blog.1q77.com/2017/01/rancher-on-digitalocean-part1/&title=DigitalOcean%20%e3%81%ab%e3%81%a6%20Rancher%20%e3%82%92%e8%a9%a6%e3%81%99%20-%20%e3%81%9d%e3%81%ae1" title=LinkedInでシェアする aria-label=LinkedInでシェアする>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span>
</a>
<a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://preview-blog.1q77.com/2017/01/rancher-on-digitalocean-part1/&text=DigitalOcean%20%e3%81%ab%e3%81%a6%20Rancher%20%e3%82%92%e8%a9%a6%e3%81%99%20-%20%e3%81%9d%e3%81%ae1" title=Twitterに投稿する aria-label=Twitterに投稿する>
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
</a>
</section>
<div class=pt-8>
<hr class="border-dotted border-neutral-300 dark:border-neutral-600">
<div class="flex justify-between pt-3">
<span>
<a class="flex group" href=/2017/01/minikube-part3/>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col">
<span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">minikube を試す - その3</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
<time datetime="2017-01-10 14:00:31 +0000 UTC">2017年1月10日</time>
</span>
</span>
</a>
</span>
<span>
<a class="flex text-right group" href=/2017/01/docker-container-resource-monitoring-using-prometheus-and-grafana-and-cadvisor/>
<span class="flex flex-col">
<span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Prometheus + Grafana + cAdvisor で Docker container のリソースモニタリング</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
<time datetime="2017-01-14 15:14:09 +0000 UTC">2017年1月14日</time>
</span>
</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
</a>
</span>
</div>
</div>
</footer>
</article>
<div class="pointer-events-none absolute top-[100vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
<a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=TOPへスクロール title=TOPへスクロール>
&uarr;
</a>
</div>
</main><footer class="py-10 print:hidden">
<div class="flex items-center justify-between">
<p class="text-sm text-neutral-500 dark:text-neutral-400">
&copy;
2022
Yoshinori Teraoka
</p>
</div>
<script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:'rgba(0,0,0,0.5)',scrollOffset:0})</script>
<script type=text/javascript src=/js/process.min.48d08339b8a087b59c7b8cb42b6717aeeed3e07bfc68b1654cac27f00583284dac59cae47fb686dd7c0e9ff1d2745689dc2071230dff432ca6d7fc24b9f2e036.js integrity="sha512-SNCDObigh7Wce4y0K2cXru7T4Hv8aLFlTKwn8AWDKE2sWcrkf7aG3XwOn/HSdFaJ3CBxIw3/Qyym1/wkufLgNg=="></script>
</footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://preview-blog.1q77.com/>
<div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
<header class="relative z-10 flex items-center justify-between flex-none px-2">
<form class="flex items-center flex-auto min-w-0">
<div class="flex items-center justify-center w-8 h-8 text-neutral-400">
<span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</div>
<input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0>
</form>
<button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="閉じる (Esc)">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
</button>
</header>
<section class="flex-auto px-2 overflow-auto">
<ul id=search-results>
</ul>
</section>
</div>
</div>
</div>
</body>
</html>